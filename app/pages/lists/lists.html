<ion-header >
  <ion-navbar primary>
    <ion-title>RankGames &raquo; Manage lists</ion-title>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <ion-card>
    <ion-card-header>Manage your lists</ion-card-header>
    <ion-card-content>
      Current pool: {{pool.length || 0}}
    </ion-card-content>
  </ion-card>
  <ion-list>
    <ion-item *ngFor="let list of lists">
      <div (click)="openCtrl(list.key)">
        {{list.name}}
        <small grey padding-horizontal>id {{list.key}}</small>
        <p>
          Ranked games: {{rankedCount(list)}}.
          Unranked games: {{unrankedCount(list)}}.
        </p>
      </div>
      <button small clear item-right (click)="edit(list)" *ngIf="!showCtrl(list.key)">
        <ion-icon item-left light name="open"></ion-icon>
      </button>
      <button small clear item-right
        (click)="openCtrl(list.key)" *ngIf="!showCtrl(list.key)">
        <ion-icon item-left light name="more"></ion-icon>
      </button>
      <ion-item-group class="listCtrl" *ngIf="showCtrl(list.key)" padding margin-top>
        <button ion-item (click)="destroying(list)" danger start>
          <ion-icon item-left danger name="warning"></ion-icon>
          <label stacked>Delete</label>
        </button>
        <button ion-item (click)="edit(list)">
          <ion-icon item-left primary name="open"></ion-icon>
          <label stacked>Open</label>
        </button>
        <button ion-item (click)="renaming(list)">
          <ion-icon item-left primary name="create"></ion-icon>
          <label stacked>Rename</labonel>
        </button>
        <button ion-item (click)="closeCtrl(list.key)">
          <ion-icon item-left light name="close"></ion-icon>
          <label stacked>Cancel</label>
        </button>
      </ion-item-group >
    </ion-item>
    <ion-item *ngIf="!thereAreLists()">
      <p>
        No lists yet.
      </p>
    </ion-item>
  </ion-list>
  <div class="newlist">
    <h2>
      Make new list
    </h2>
    <div>
      <ion-label stacked primary>List name</ion-label>
      <ion-input type="text" [(ngModel)]="newName"></ion-input>
    </div>
    <div text-right>
      <button item-right (click)="create()">Create</button>
    </div>
  </div>

</ion-content>
